<!DOCTYPE html>
<html lang="en">
<head>
	<title>Shoping Cart</title>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="/images/icons/favicon.png"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/iconic/css/material-design-iconic-font.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/linearicons-v1.0.0/icon-font.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css"/>
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="/vendor/css-hamburgers/hamburgers.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/animsition/css/animsition.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/select2/select2.min.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/perfect-scrollbar/perfect-scrollbar.css"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/util.css"/>
	<link rel="stylesheet" type="text/css" href="/css/main.css"/>
<!--===============================================================================================-->
</head>
<body class="animsition">
	
<div th:replace="common/headertemplate :: bookstore-header" />

	<!-- Cart -->
	<div class="wrap-header-cart js-panel-cart">
		<div class="s-full js-hide-cart"></div>

		<div class="header-cart flex-col-l p-l-65 p-r-25">
			<div class="header-cart-title flex-w flex-sb-m p-b-8">
				<span class="mtext-103 cl2">
					Your Cart
				</span>

				<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
					<i class="zmdi zmdi-close"></i>
				</div>
			</div>
			
			<div class="header-cart-content flex-w js-pscroll">
				<ul class="header-cart-wrapitem w-full">
					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="/images/item-cart-01.jpg" alt="IMG"/>
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								White Shirt Pleat
							</a>

							<span class="header-cart-item-info">
								1 x $19.00
							</span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="/images/item-cart-02.jpg" alt="IMG"/>
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								Converse All Star
							</a>

							<span class="header-cart-item-info">
								1 x $39.00
							</span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="/images/item-cart-03.jpg" alt="IMG"/>
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								Nixon Porter Leather
							</a>

							<span class="header-cart-item-info">
								1 x $17.00
							</span>
						</div>
					</li>
				</ul>
				
				<div class="w-full">
					<div class="header-cart-total w-full p-tb-40">
						Total: $75.00
					</div>

					<div class="header-cart-buttons flex-w w-full">
						<a th:href="@{/shoping-cart}" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
							View Cart
						</a>

						<a th:href="@{/shoping-cart}" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
							Check Out
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- breadcrumb -->
	<div class="container">
		<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
			<a th:href="@{/shoppingCart/cartPage}" class="stext-109 cl8 hov-cl1 trans-04">
				Shopping Cart
				<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
			</a>

			<span class="stext-109 cl4">
				Checkout
			</span>
		</div>
	</div>
		

	<!-- Shoping Cart -->
	<div>
	  	<form th:action="@{/checkoutPage}" method="post">
		<div class="container">
			<div class="row">
				<div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
					<div class="m-l-25 m-r--38 m-lr-0-xl">
					<!-- start of collapse -->
					<div id="accordion">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          1.Shipping Address
        </button>
      </h5>
    </div>
    <div id="collapseOne" class="collapse" th:classappend="${classActiveShipping}? 'show'" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">
			<!-- <form> -->	
				<table class="table" th:if="${not emptyShippingList}">
					<thead>
						<tr>
							<th>Available Shipping Address</th>
							<th>Operations</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="userShipping : ${userShippingList}">
							<td
								th:text="${userShipping.userShippingStreet1}+' '+${userShipping.userShippingStreet2}+', '+${userShipping.userShippingCity}
							+', '+${userShipping.userShippingState}"></td>
							<td><a th:href="@{/setShippingAddressPage(userShippingId=${userShipping.id})}">use
									this address</a></td>
						</tr>
					</tbody>
				</table>			
				<div class="form-group">
					<label for="shippingName">* Name</label> <input type="text"
						class="form-control" id="shippingName"
						placeholder="Receiver Name" name="shippingAddressName"
						th:value="${shippingAddress.shippingAddressName}" />
				</div>
				<div class="form-group">
					<label for="shippingStreet">* Street Address</label> <input
						type="text" class="form-control" id="shippingStreet"
						placeholder="Street Address 1" name="shippingAddressStreet1"
						th:value="${shippingAddress.shippingAddressStreet1}" />
				</div>
				<div class="form-group">
					<input type="text" class="form-control"
						placeholder="Street Address 2" name="shippingAddressStreet2"
						th:value="${shippingAddress.shippingAddressStreet2}" />
				</div>
				<div class="form-group">
					<label for="shippingCity">* City</label> <input type="text"
						class="form-control" id="shippingCity"
						placeholder="Shipping City" th:name="shippingAddressCity"
						required="required"
						th:value="${shippingAddress.shippingAddressCity}" />
				</div>
				<div class="form-group">
					<label for="shippingState">* State</label> <select
						id="shippingState" class="form-control"
						th:name="shippingAddressState"
						th:value="${shippingAddress.shippingAddressState}"
						required="required">
						<option value="" disabled="disabled">Please select
							an option</option>
						<option th:each="state : ${stateList}" th:text="${state}"
							th:selected="(${shippingAddress.shippingAddressState}==${state})"></option>
					</select>
				</div>
				<div class="form-group">
					<label for="shippingZipcode">* Zipcode</label> <input
						type="text" class="form-control" id="shippingZipcode"
						placeholder="Shipping Zipcode"
						th:name="shippingAddressZipcode" required="required"
						th:value="${shippingAddress.shippingAddressZipcode}" />
				</div>
				<a data-toggle="collapse" data-parent="#accordion"
					class="btn btn-warning pull-right" href="#collapseTwo">Next</a>
				<br/>
			<!-- </form> -->
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          2.Payment Information
        </button>
      </h5>
    </div>
    <div id="collapseTwo" class="collapse" th:classappend="${classActivePayment}? 'show'" aria-labelledby="headingTwo" data-parent="#accordion">
      <div class="card-body">
			<!-- <form> -->
			<table class="table" th:if="${not emptyPaymentList}">
				<thead>
					<tr>
						<th>Available Credit Card</th>
						<th>Operations</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="userPayment : ${userPaymentList}">
						<td th:text="${userPayment.cardName}"></td>
						<td><a
							th:href="@{/setPaymentMethodPage(userPaymentId=${userPayment.id})}">use
								this payment</a></td>
					</tr>
				</tbody>
			</table>				
			<img th:src="@{/image/creditcard.png}" class="img-responsive" /><br />
			<div class="form-group">
				<label for="cardType">* Select Card Type: </label> <select
					class="form-control" id="cardType" name="type"
					th:value="${payment.type}">
					<option value="visa">Visa</option>
					<option value="mastercard">Mastercard</option>
					<option value="discover">Discover</option>
					<option value="amex">American Express</option>
				</select>
			</div>
			<div class="form-group">
				<label for="cardHolder">* Card Holder Name:</label> <input
					type="text" class="form-control" id="cardHolder"
					required="required" placeHolder="Card Holder Name"
					th:name="holderName" th:value="${payment.holderName}" />
			</div>
			<div class="form-group">
				<label for="cardNumber">* Card Number:</label>
				<div class="input-group">
					<input type="tel" class="form-control" id="cardNumber"
						required="required" placeHolder="Valid Card Number"
						th:name="cardNumber" th:value="${payment.cardNumber}" />
					<span class="input-group-addon"><i
						class="fa fa-credit-card" aria-hidden="true"></i></span>
				</div>
			</div>
			 <div class="row">
			    <div class="col">
			    <label for="expirationDate">Expiration Date</label>
					<select class="form-control" name="expiryMonth"
						required="required" th:value="${payment.expiryMonth}">
						<option disabled="disabled">-- Month --</option>
						<option value="01">Jan (01)</option>
						<option value="02">Feb (02)</option>
						<option value="03">Mar (03)</option>
						<option value="04">Apr (04)</option>
						<option value="05">May (05)</option>
						<option value="06">June (06)</option>
						<option value="07">July (07)</option>
						<option value="08">Aug (08)</option>
						<option value="09">Sep (09)</option>
						<option value="10">Oct (10)</option>
						<option value="11">Nov (11)</option>
						<option value="12">Dec (12)</option>
					</select>
			    </div>
			    <div class="col">
			    <label for="expirationYear">Expiration Year</label>
					<select class="form-control" name="expiryYear"
						th:value="${payment.expiryYear}">
						<option disabled="disabled">-- Year --</option>
						<option value="2017">2017</option>
						<option value="2018">2018</option>
						<option value="19">2019</option>
						<option value="20">2020</option>
						<option value="21">2021</option>
						<option value="22">2022</option>
						<option value="23">2023</option>
						<option value="23">2024</option>
						<option value="23">2025</option>
						<option value="23">2026</option>
						<option value="23">2027</option>
						<option value="23">2028</option>
						<option value="23">2029</option>
					</select>
			    </div>
			  </div>
			  <br/>
				<div class="form-group">
					<label for="cardCVC">CV Code</label> <input id="cardCVC"
						type="tel" class="form-control" name="cvc"
						placeholder="CVC" th:name="cvc"
						th:value="${payment.cvc}" />
				</div>
			 
				<div class="form-group">
			      <div class="form-check">
			        <input class="form-check-input" type="checkbox" id="theSameAsShippingAddress" name="billingSameAsShipping" value="true"/>
			        <label class="form-check-label" for="billingSameAsShipping">
			          The same as shipping address
			        </label>
			      </div>
				</div>
										
				<div class="form-group">
					<label for="billingName">* Name</label> <input type="text"
						class="form-control billingAddress" id="billingName"
						placeholder="Receiver Name" th:name="billingAddressName"
						required="required"
						th:value="${billingAddress.billingAddressName}" />
				</div>
			  <br/>
				<div class="form-group">
					<label for="billingAddress">* Street Address</label> <input
						type="text" class="form-control billingAddress" id="billingAddress"
						placeholder="Street Address 1"
						th:name="billingAddressStreet1" required="required"
						th:value="${billingAddress.billingAddressStreet1}" /> <input
						type="text" class="form-control billingAddress" id="billingAddress"
						placeholder="Street Address 2"
						th:name="billingAddressStreet2"
						th:value="${billingAddress.billingAddressStreet2}" />
				</div>
				<div class="form-group">
					<label for="billingCity">* City</label> <input type="text"
						class="form-control billingAddress" id="billingCity"
						placeholder="Billing city" th:name="billingAddressCity"
						required="required"
						th:value="${billingAddress.billingAddressCity}" />
				</div>
				<div class="form-group">
					<label for="billingState">* State</label> <select
						id="billingState" class="form-control billingAddress"
						th:name="billingAddressState"
						th:value="${billingAddress.billingAddressState}"
						required="required">
						<option value="" disabled="disabled">Please select
							an option</option>
						<option th:each="state : ${stateList}" th:text="${state}"
							th:selected="(${billingAddress.billingAddressState}==${state})"></option>
					</select>
				</div>
				<div class="form-group">
					<label for="billingZipcode">* Zipcode</label> <input
						type="text" class="form-control billingAddress" id="billingZipcode"
						placeholder="Billing Zipcode"
						th:name="billingAddressZipcode" required="required"
						th:value="${billingAddress.billingAddressZipcode}" />
				</div>
			
			  
			<a data-toggle="collapse" data-parent="#accordion"
				class="btn btn-warning pull-right" href="#collapseThree">Next</a>
				
			<br/>
			<!-- </form> -->
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          3.Review Items and Shipping
        </button>
      </h5>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body">
      		<div>
      		<!-- <form> -->
       		<div class="form-group">
			    <label for="shippingMethod">Choose your shipping method:</label>
				  <input class="form-check-input" type="radio" checked="checked" name="shippingMethod" value="groundShipping"/>
				  <label class="form-check-label" for="groundShipping">
				    Ground Shipping
				  </label>
			  	  <input class="form-check-input" type="radio" name="shippingMethod" value="premiumShipping"/>
				  <label class="form-check-label" for="premiumShipping">
				    Premium Shipping
				  </label>
			</div>
			
			<table class="table">
			  <thead>
			    <tr>
			      <th scope="col">#</th>
			      <th scope="col">Products</th>
			      <th scope="col">Price</th>
			      <th scope="col">Qty</th>
			    </tr>
			  </thead>
			  <tbody>
			    <tr th:each="cartItem : ${cartItemList}">
			      <th scope="row">
			      <a th:href="@{/bookDetail(id=${cartItem.book.id})}"> <img
								class="img-responsive shelf-book"
								th:src="@{/image/book/}+${cartItem.book.id}+'.png'"
								style="width: 70px;" />
					</a>
					</th>
			      <td>
      				<a th:href="@{/bookDetail?id=}+${cartItem.book.id}"><h4
							th:text="${cartItem.book.title}"></h4></a>
					<p th:if="${cartItem.book.inStockNumber&gt;10}"
						style="color: green;">In Stock</p>
					<p
						th:if="${cartItem.book.inStockNumber&lt;10 and cartItem.book.inStockNumber&gt;0}"
						style="color: green;">
						Only <span th:text="${cartItem.book.inStockNumber}"></span>
						In Stock
					</p>
					<p th:if="${cartItem.book.inStockNumber==0}"
						style="color: darkred;">Product Unavailable</p>
					<a th:href="@{/shoppingCart/removeItemPage?id=}+${cartItem.id}">delete</a>
			      </td>
			      <td>
	      			<h5 style="color: #db3208; font-size: large;">
						$<span th:text="${cartItem.book.ourPrice}"
							th:style="${cartItem.book.inStockNumber}==0? 'text-decoration: line-through' : ''"></span>
					</h5>
			      </td>
			      <td>
			      <h5 style="font-size: large;" th:text="${cartItem.qty}"></h5>
			      </td>
			    </tr>
<!-- 			    <tr>
			      <th scope="row">2</th>
			      <td>Jacob</td>
			      <td>Thornton</td>
			      <td>@fat</td>
			    </tr>
			    <tr>
			      <th scope="row">3</th>
			      <td>Larry</td>
			      <td>the Bird</td>
			      <td>@twitter</td>
			    </tr> -->
			  </tbody>
			</table>

				<hr />
				<h4 class="col-xs-12 text-right">
					<strong style="font-size: large;">Order Total (<span
						th:text="${#lists.size(cartItemList)}"></span> items):
					</strong> <span style="color: #db3208; font-szie: large;">$<span
						th:text="${shoppingCart.grandTotal}"></span></span>
				</h4>
				<br />
				<br />
				<button type="submit" class="btn btn-warning btn-block">Place
					your order</button>
				<p style="font-size: smaller;">
					By placing your order, you agree to Ranjen's Bookstore <a href="#">privacy</a>
					notice and <a href="#">conditions</a> of use.
				</p>
			<!-- </form> -->
			</div>
      </div>
    </div>
  </div>
</div>
					<!-- end of collapse -->
					</div>
				</div>

				<div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
					<div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
						<div class="flex-w flex-t bor12 p-b-13">
							<div class="size-208">
								<span class="stext-110 cl2">
									Total
							<span class="stext-110 cl2"
								th:text="${#lists.size(cartItemList)}"></span>
							items
								</span>
							</div>
						</div>
						
						<div class="flex-w flex-t bor12 p-b-13">
							<div>
								<div>Total before tax:</div>
								<div>
									$<span th:text="${shoppingCart.grandTotal}"></span>
								</div>
							</div>
						</div>
						
						<div class="flex-w flex-t bor12 p-b-13">
							<div>
								<div>Estimated tax:</div>
								<div>
									$<span th:with="tax=${shoppingCart.grandTotal*0.06}"
											th:text="${#numbers.formatDecimal(tax, 0 ,2)}"></span>
								</div>
							</div>
						</div>

						<div class="flex-w flex-t p-t-27 p-b-33">
							<div class="size-208">
								<span class="mtext-101 cl2">
									Total Price:
								</span>
							</div>

							<div class="size-209 p-t-1">
										<strong style="color: darkred;">$<span
											th:with="total=${shoppingCart.grandTotal+shoppingCart.grandTotal*0.06}"
											th:text="${#numbers.formatDecimal(total, 0 ,2)}"></span></strong>
							</div>
							<div>Shipping and handling haven't applied.</div>
						</div>
						
						<!-- <div class="flex-w flex-t p-t-27 p-b-33">Shipping and handling haven't applied.</div> -->

						<button type="submit" class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
							Place your Order
						</button>
					</div>
				</div>
			</div>
		</div>
	</form>
	</div>
		
<div th:replace="common/headertemplate :: bookstore-footer" />

	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

<!--===============================================================================================-->	
	<script th:src="@{/vendor/jquery/jquery-3.2.1.min.js}"></script>
<!--===============================================================================================-->
	<script th:src="@{/vendor/animsition/js/animsition.min.js}"></script>
<!--===============================================================================================-->
	<script th:src="@{/vendor/bootstrap/js/popper.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.min.js}"></script>
<!--===============================================================================================-->
	<script th:src="@{/vendor/select2/select2.min.js}"></script>
	<script>
		$(".js-select2").each(function(){
			$(this).select2({
				minimumResultsForSearch: 20,
				dropdownParent: $(this).next('.dropDownSelect2')
			});
		})
	</script>
<!--===============================================================================================-->
	<script th:src="@{/vendor/MagnificPopup/jquery.magnific-popup.min.js}"></script>
<!--===============================================================================================-->
	<script th:src="@{/vendor/perfect-scrollbar/perfect-scrollbar.min.js}"></script>
	<script>
		$('.js-pscroll').each(function(){
			$(this).css('position','relative');
			$(this).css('overflow','hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed: 1,
				scrollingThreshold: 1000,
				wheelPropagation: false,
			});

			$(window).on('resize', function(){
				ps.update();
			})
		});
	</script>
<!--===============================================================================================-->
	<script th:src="@{/js/main.js}"></script>
	<script>
	$(document).ready(function() {
		$("#theSameAsShippingAddress").on('click', checkBillingAddress);
		$("#" + "shoppingCartPage").addClass('active-menu');
 		$(".cartItemQty").on('change', function(){
			var id=this.id;
			$('#update-item-'+id).css('display', 'inline-block');
		}); 
	}); 
	
	function checkBillingAddress() {
		if($("#theSameAsShippingAddress").is(":checked")) {
			$(".billingAddress").prop("disabled", true);
		} else {
			$(".billingAddress").prop("disabled", false);
		}
	}
	
	</script>

</body>
</html>